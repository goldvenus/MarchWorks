{"ast":null,"code":"import _Object$assign from \"@babel/runtime-corejs2/core-js/object/assign\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\n\nvar Text =\n/*#__PURE__*/\nfunction () {\n  function Text(canvas, text) {\n    var fontSize = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 20;\n    var fontFamily = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : \"Georgia\";\n    var fillStyleActive = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : \"#fff\";\n    var fillStyleUnactive = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : \"#ccc\";\n    var hz = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 5;\n\n    _classCallCheck(this, Text);\n\n    this.canvas = canvas;\n    this.ctx = this.canvas.getContext('2d');\n    this.text = text;\n    this.fontSize = fontSize;\n    this.fontFamily = fontFamily;\n    this.fillStyleActive = fillStyleActive;\n    this.fillStyleUnactive = fillStyleUnactive;\n    this.fillStyle = fillStyleActive;\n    this.font = this.fontSize + \"px \" + this.fontFamily;\n    this.hz = hz;\n    this.ctx.font = this.font;\n    this.ctx.fillStyle = this.fillStyle;\n    this.canvas.width = this.ctx.measureText(this.text).width;\n    this.canvas.height = this.fontSize;\n    this.write();\n    this.startAnimation();\n  }\n\n  _createClass(Text, [{\n    key: \"write\",\n    value: function write() {\n      this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n      this.ctx.font = this.font;\n      this.ctx.fillStyle = this.fillStyle;\n      this.ctx.fillText(this.text, 0, this.fontSize * 3 / 4 + 2);\n      this.data = this.getPixels();\n      this.ctx.putImageData(this.data, 0, 0);\n    }\n  }, {\n    key: \"reWrite\",\n    value: function reWrite() {\n      this.ctx.putImageData(this.data, 0, 0);\n      setTimeout(this.startAnimation.bind(this), Math.floor(Math.random() * (1000 - 400) + 400));\n    }\n  }, {\n    key: \"animate\",\n    value: function animate() {\n      var shift = Math.floor(Math.random(10 - 3) + 3),\n          pos = Math.random().toFixed(1);\n\n      if (pos < 0.1) {\n        pos = 0.1;\n      } else if (pos > 0.7) {\n        pos = 0.7;\n      }\n\n      var newData = this.getPixels(pos);\n\n      var data = _Object$assign([], newData.data);\n\n      if (Math.random() < 0.5) {\n        for (var i = 0; i < data.length; i++) {\n          newData.data[i] = data[i - 4 * shift < 0 ? data.length + (i - 4 * shift) : i - 4 * shift];\n        }\n      } else {\n        for (var _i = 0; _i < data.length; _i++) {\n          newData.data[_i] = data[_i + 4 * shift < data.length ? _i + 4 * shift : _i + 4 * shift - data.length];\n        }\n      }\n\n      this.ctx.putImageData(newData, 0, 0);\n    }\n  }, {\n    key: \"startAnimation\",\n    value: function startAnimation() {\n      if (!this.canvas.parentElement.className.includes('is-active')) {\n        this.fillStyle = this.fillStyleUnactive;\n        this.write();\n\n        for (var i = 0; i < this.hz; i++) {\n          this.animate();\n        }\n      } else {\n        this.fillStyle = this.fillStyleActive;\n        this.write();\n      }\n\n      setTimeout(this.reWrite.bind(this), 100);\n    }\n  }, {\n    key: \"getPixels\",\n    value: function getPixels() {\n      var o = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n      return this.ctx.getImageData(0, 0, this.canvas.width, this.canvas.height * o);\n    }\n  }]);\n\n  return Text;\n}();\n\nexport default Text;","map":{"version":3,"sources":["C:\\Users\\010\\NextProjects\\Edel\\classes\\Text.js"],"names":["Text","canvas","text","fontSize","fontFamily","fillStyleActive","fillStyleUnactive","hz","ctx","getContext","fillStyle","font","width","measureText","height","write","startAnimation","clearRect","fillText","data","getPixels","putImageData","setTimeout","bind","Math","floor","random","shift","pos","toFixed","newData","i","length","parentElement","className","includes","animate","reWrite","o","getImageData"],"mappings":"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","sourcesContent":["class Text {\r\n  constructor(canvas, text, fontSize=20, fontFamily=\"Georgia\", fillStyleActive=\"#fff\", fillStyleUnactive=\"#ccc\", hz=5) {\r\n    this.canvas = canvas\r\n    this.ctx = this.canvas.getContext('2d')\r\n    this.text = text\r\n    this.fontSize = fontSize\r\n    this.fontFamily = fontFamily\r\n    this.fillStyleActive = fillStyleActive\r\n    this.fillStyleUnactive = fillStyleUnactive \r\n    this.fillStyle = fillStyleActive\r\n    this.font = this.fontSize + \"px \" + this.fontFamily\r\n    this.hz = hz\r\n\r\n    this.ctx.font = this.font\r\n    this.ctx.fillStyle = this.fillStyle\r\n    this.canvas.width = this.ctx.measureText(this.text).width\r\n    this.canvas.height = this.fontSize\r\n\r\n    this.write()\r\n    this.startAnimation()\r\n  }\r\n  write(){\r\n    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height)\r\n    this.ctx.font = this.font\r\n    this.ctx.fillStyle = this.fillStyle\r\n    this.ctx.fillText(this.text, 0, this.fontSize*3/4+2);\r\n\r\n    this.data = this.getPixels();\r\n    this.ctx.putImageData(this.data, 0, 0);\r\n\r\n  }\r\n\r\n  reWrite(){\r\n    this.ctx.putImageData(this.data, 0, 0);\r\n    setTimeout(this.startAnimation.bind(this), Math.floor(Math.random()*(1000 - 400) + 400))\r\n  }\r\n\r\n  animate(){\r\n    var shift = Math.floor(Math.random(10 - 3) + 3), pos = Math.random().toFixed(1);\r\n    if(pos < 0.1){\r\n      pos = 0.1;\r\n    }else if(pos > 0.7){\r\n      pos = 0.7;\r\n    }\r\n    var newData = this.getPixels(pos);\r\n    const data = Object.assign([], newData.data);\r\n    if(Math.random() < 0.5){\r\n      for (let i=0; i<data.length; i++) {\r\n        newData.data[i] = data[i-4*shift<0 ? data.length+(i-4*shift) : i-4*shift];\r\n      }\r\n    }else{\r\n      for (let i=0; i<data.length; i++) {\r\n        newData.data[i] = data[i+4*shift<data.length ? i+4*shift : (i+4*shift) - data.length];\r\n      }\r\n    }\r\n    this.ctx.putImageData(newData, 0, 0);\r\n  }\r\n\r\n  startAnimation(){\r\n    if(!this.canvas.parentElement.className.includes('is-active')){\r\n      this.fillStyle = this.fillStyleUnactive\r\n      this.write()\r\n      for (let i = 0; i < this.hz; i++) {\r\n        this.animate()\r\n      }\r\n    }else{\r\n      this.fillStyle = this.fillStyleActive\r\n      this.write()\r\n    }\r\n    setTimeout(this.reWrite.bind(this), 100)\r\n  }\r\n\r\n  getPixels(o=1) {\r\n    return this.ctx.getImageData(0, 0, this.canvas.width, this.canvas.height*o);\r\n  }\r\n}\r\n\r\nexport default Text;"]},"metadata":{},"sourceType":"module"}